#cloud-config
autoinstall:
  version: 1
  identity:
    hostname: secure-host
    username: secure-user
    password: $6$kTS2D0QZCV6HXAjb$HZNC6xHQVtckeq/zkvv0xKCoxMdjlH8pUq48Zn0/fSlxa/O2v0/.5CZKCJOn9iBmckVekRt/JDOCrWfTjRtXQ/
  interactive-sections:
    - storage
  locale: en_GB.UTF-8
  timezone: Europe/London
  keyboard:
    layout: gb
    variant: ''
  network:
    version: 2
    ethernets:
      enp6s0:
        dhcp4: true
  ssh:
    install-server: true
    allow-pw: false
    authorized-keys:
      - "SHA256:o47vl96n/V33+zNV65qXrjj3MXKkcXucwXzo5Z/8ywc darkfuckerberg@meta1t0ast3r"
  packages:
    - ubuntu-desktop
    - ufw
    - fail2ban
    - apparmor
    - apparmor-profiles
    - apparmor-utils
    - cryptsetup
    - vim
    - curl
    - notesnook
    - torbrowser-launcher
    - secure-delete
    - wipe
    - kleopatra
    - keepassxc
    - openvpn
    - unattended-upgrades
    - gnupg
    - brave-browser
    - firejail
    - veracrypt
    - signal-desktop
  late-commands:
    - "echo 'net.ipv6.conf.all.disable_ipv6 = 1' >> /etc/sysctl.conf"
    - "echo 'net.ipv6.conf.default.disable_ipv6 = 1' >> /etc/sysctl.conf"
    - "echo 'net.ipv6.conf.lo.disable_ipv6 = 1' >> /etc/sysctl.conf"
    - "echo 'GRUB_CMDLINE_LINUX=\"ipv6.disable=1\"' >> /etc/default/grub"
    - "update-grub"
    - "shutdown -r now"

